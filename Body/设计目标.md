# Body 设计目标

更新时间：2026-02-20

## 1. 目标定位

Body 负责机器人“躯体”侧能力，核心职责是：

- 稳定连接 Soul 服务通信链路（MQTT + HTTP）
- 上报终端能力快照（skills）
- 执行技能调用并回传结果
- 采集用户输入并按协议提交到 `/v1/chat`

## 2. 核心设计原则

1. 初始化即上报能力：连接后固定执行 `online -> skills -> heartbeat`。  
2. 协议一致性：字段和 topic 以 `../doc/通信协议-v2.md` 为准。  
3. 能力可演进：技能变化时单调递增 `skill_version`。  
4. 回执可追踪：每次调用都按 `request_id` 回传 `result`。  
5. 输入归一化：对话请求统一提交 `inputs[]`。

## 3. 当前对接边界（Phase 1）

- 已对齐：`keyboard_text` 主输入链路。  
- 预留：`speech_text/audio/image/video/sensor_state` 的上传与文字化流程。

## 4. 运行流程（当前）

1. MQTT 连接成功，发布 `online`。  
2. 上报 `skills` 快照（含版本）。  
3. 周期发送 `heartbeat`。  
4. 收到 `invoke` 后执行动作并发布 `result`。  
5. 采集到用户输入后调用 `POST /v1/chat`。

## 5. 关联文档

- 技术调研：`技术调研.md`
- API：`../Soul/docs/API文档-Soul服务.md`
- 通信协议：`../doc/通信协议-v2.md`
