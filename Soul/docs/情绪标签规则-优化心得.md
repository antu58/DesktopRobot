# 情绪标签规则优化心得（PAD -> 15类）

更新时间：2026-02-22

## 1. 背景问题

在仅依赖 PAD 最近邻映射时，中文短句经常落在低幅值区间（`|p|,|a|,|d|` 较小），导致大量语句被判成 `neutral`。  
典型误判（优化前）：

- `我很难过` -> `neutral`
- `我失恋了` -> `neutral`
- `我很生气` -> `neutral`
- `气死我了` -> `neutral`
- `太惊讶了` -> `neutral`

这会直接影响：

- 情绪驱动动作（表情/点头摇头）不自然；
- 灵魂 PAD 更新的语义解释失真；
- 用户体感是“系统没有听懂情绪”。

## 2. PAD 分布观察（中文常见短句）

对常见情绪语句做了批量探测，发现两个稳定特征：

- 情感方向（正负、唤醒高低）有信号，但强度常偏弱；
- 一些明显情绪词（如“失恋”“生气”“惊讶”）在 PAD 幅值不够大时，会被最近邻吸回 `neutral`。

同时，任务指令类文本（如“开灯”“请帮我记录一下”）本就应保持 `neutral`，不能被规则误提权。

## 3. 新规则设计（已落地）

采用“PAD + 文本规则”混合策略：

1. 先跑原始 PAD 推断（保留模型输出）。
2. 提取文本情绪关键词分数（15 类标签词典）。
3. 计算每个标签的综合分：
   - `0.70 * PAD相似度 + 1.05 * 关键词分`
   - 对 base emotion 加小偏置，保证连续性。
4. 低能量且任务指令文本强制保留 `neutral`（防误触发）。
5. 当关键词证据强时，向目标情绪 PAD 原型做有限 blend，并抬升 `intensity`。

核心目标：

- 明显情绪词不再被 `neutral` 吞没；
- 任务指令不被误判为情绪语句；
- 仍保持 PAD 连续性，不做硬切。

## 4. 优化后效果（抽样）

- `我很难过` -> `sadness`
- `我失恋了` -> `sadness`
- `我很生气` -> `anger`
- `气死我了` -> `anger`
- `我很焦虑` -> `anxiety`
- `太惊讶了` -> `surprise`
- `好无聊` -> `boredom`
- `开灯` -> `neutral`（保持正确）

## 5. 规则边界与后续建议

当前规则是工程兜底，不替代模型升级：

- 对隐喻、反讽、复杂上下文仍可能偏差；
- 中文口语变体依赖词典覆盖，需持续扩充；
- 后续建议引入“多轮上下文情绪平滑”与“按领域词库动态热更新”。

建议演进路线：

1. 按线上日志补充高频口语词；
2. 按情绪标签维护混淆矩阵（特别是 `sadness/anxiety/frustration`）；
3. 保留规则层开关，便于 A/B 对比与回滚。
